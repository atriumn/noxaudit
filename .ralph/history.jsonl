{"ts":"2026-02-16T04:59:19.672551430Z","type":{"kind":"loop_started","prompt":"Rename nightwatch → noxaudit and prepare for open source release\n\n## Background\n\nNightwatch is an AI-powered codebase auditor that runs nightly with rotating focus areas (security, patterns, docs, etc.). It's currently branded as \"nightwatch\" but that name is extremely common on GitHub (~1M repos). Renaming to \"noxaudit\" (nox = night in Latin) for uniqueness and potential open source release.\n\n## Tasks\n\n### 1. Repository-wide Rename\n\n**Find and replace across all files:**\n- `nightwatch` → `noxaudit` (case-sensitive)\n- `Nightwatch` → `Noxaudit` (in titles, docs)\n- Keep Python package structure: `nightwatch/` directory → `noxaudit/`\n\n**Files to update:**\n- All `*.py` files (imports, docstrings, comments)\n- All `*.md` files (README, docs)\n- `pyproject.toml` (package name, URLs)\n- `action/action.yml` (GitHub Action)\n- Test files\n- Config examples\n\n**Special cases:**\n- `.nightwatch/` directory references in code → `.noxaudit/`\n- `nightwatch.yml` config file → `noxaudit.yml`\n- `nightwatch-ai` PyPI package name → `noxaudit` (simpler, more distinctive)\n\n### 2. Update GitHub References\n\n**Current:**\n```\nhttps://github.com/atriumn/nightwatch\n```\n\n**New:**\n```\nhttps://github.com/atriumn/noxaudit\n```\n\nUpdate in:\n- README.md (all links)\n- pyproject.toml `[project.urls]`\n- nightwatch/issues.py footer link\n- action/action.yml install command\n\n### 3. Make Issues Footer Configurable\n\n**Current (hardcoded):**\n```python\n# nightwatch/issues.py\nf\"*Found by [Nightwatch](https://github.com/atriumn/nightwatch)...\"\n```\n\n**New (use repo from config):**\n```python\n# Read from config or use generic fallback\nrepo_url = config.get('repository_url', 'https://github.com/atriumn/noxaudit')\nf\"*Found by [Noxaudit]({repo_url})...\"\n```\n\n### 4. Update pyproject.toml Metadata\n\n```toml\n[project]\nname = \"noxaudit\"  # was nightwatch-ai\ndescription = \"Nightly AI-powered codebase audits with rotating focus areas\"\nauthors = [\n    { name = \"Jeff Rogers\", email = \"jeff@atriumn.com\" },  # or your preferred email\n]\nkeywords = [\"ai\", \"code-review\", \"audit\", \"security\", \"codebase\", \"nightwatch\"]\n\n[project.urls]\nHomepage = \"https://github.com/atriumn/noxaudit\"\nIssues = \"https://github.com/atriumn/noxaudit/issues\"\n```\n\n### 5. Rename Python Package Directory\n\n```bash\n# Rename the main package directory\nmv nightwatch/ noxaudit/\n\n# Update all imports\n# From: from nightwatch.config import ...\n# To:   from noxaudit.config import ...\n```\n\n### 6. Update CLI Entry Point\n\n```toml\n[project.scripts]\nnoxaudit = \"noxaudit.cli:main\"  # was nightwatch = \"nightwatch.cli:main\"\n```\n\n### 7. Add CONTRIBUTING.md\n\nCreate `CONTRIBUTING.md` with:\n- How to set up development environment\n- How to run tests\n- Code style (ruff)\n- How to submit PRs\n- How to add new focus areas\n\nTemplate:\n```markdown\n# Contributing to Noxaudit\n\n## Development Setup\n\n\\`\\`\\`bash\ngit clone https://github.com/atriumn/noxaudit.git\ncd noxaudit\npython -m venv .venv\nsource .venv/bin/activate  # or .venv\\Scripts\\activate on Windows\npip install -e \".[dev]\"\n\\`\\`\\`\n\n## Running Tests\n\n\\`\\`\\`bash\npytest tests/ -v\nruff check noxaudit/ tests/\nruff format noxaudit/ tests/\n\\`\\`\\`\n\n## Adding a New Focus Area\n\n1. Create `noxaudit/focus/yourarea.py` extending `FocusArea`\n2. Add prompt template to `focus_prompts/yourarea.md`\n3. Register in `noxaudit/focus/__init__.py`\n4. Add tests in `tests/test_focus.py`\n\n## Pull Requests\n\n- Keep changes focused and atomic\n- Add tests for new features\n- Update README if adding user-facing features\n- Run `ruff format` before committing\n```\n\n### 8. Add CHANGELOG.md\n\nCreate `CHANGELOG.md`:\n```markdown\n# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### Changed\n- Renamed project from Nightwatch to Noxaudit for better GitHub uniqueness\n- Package name changed from `nightwatch-ai` to `noxaudit`\n- CLI command changed from `nightwatch` to `noxaudit`\n\n## [0.1.0] - 2026-02-15\n\n### Added\n- Initial release\n- Multi-provider AI support (Anthropic, Google Gemini)\n- Rotating focus areas: security, patterns, docs, hygiene, performance, dependencies, testing\n- Decision memory system to avoid re-flagging resolved issues\n- GitHub Actions integration\n- Telegram notifications\n- GitHub issue creation\n- Two-pass audit for large codebases\n```\n\n### 9. Update README.md\n\n**Key changes:**\n1. Update title: `# Noxaudit`\n2. Update installation: `pip install noxaudit`\n3. Update CLI examples: `nightwatch run` → `noxaudit run`\n4. Update config filename: `nightwatch.yml` → `noxaudit.yml`\n5. Update directory references: `.nightwatch/` → `.noxaudit/`\n6. Update GitHub Action usage:\n   ```yaml\n   - uses: atriumn/noxaudit/action@main\n   ```\n\n### 10. Update Config Example\n\nRename `nightwatch.yml.example` → `noxaudit.yml.example` and update header:\n```yaml\n# Noxaudit configuration\n# Copy this to noxaudit.yml and customize for your project.\n```\n\n### 11. Update .gitignore\n\nAdd:\n```\n.noxaudit/\nnoxaudit.yml\n```\n\n(Keep `.nightwatch/` for backward compat during migration, or remove)\n\n### 12. Update GitHub Action\n\n`action/action.yml`:\n```yaml\nname: 'Noxaudit'\ndescription: 'Nightly AI-powered codebase audits with rotating focus areas'\n# ... rest of action\n```\n\nAnd update the install command:\n```bash\nrun: pip install git+https://github.com/atriumn/noxaudit.git\n```\n\n## Testing Strategy\n\n**Before declaring done:**\n\n1. **Package structure:**\n   ```bash\n   # Verify package installs\n   pip install -e .\n   \n   # Verify CLI works\n   noxaudit --help\n   noxaudit schedule\n   ```\n\n2. **Import paths:**\n   ```bash\n   # All tests pass\n   pytest tests/ -v\n   \n   # No import errors\n   python -c \"from noxaudit.cli import main; print('OK')\"\n   python -c \"from noxaudit.runner import run_audit; print('OK')\"\n   ```\n\n3. **Config loading:**\n   ```bash\n   # Copy example config\n   cp noxaudit.yml.example noxaudit.yml\n   \n   # Verify it loads\n   noxaudit schedule\n   ```\n\n4. **Lint passes:**\n   ```bash\n   ruff check noxaudit/ tests/\n   ruff format --check noxaudit/ tests/\n   ```\n\n5. **GitHub references:**\n   ```bash\n   # No old references remain\n   grep -r \"nightwatch\" --include=\"*.py\" --include=\"*.md\" --include=\"*.yml\" . | grep -v \"# \"\n   # Should only show: CHANGELOG.md mentions, comments explaining the rename\n   ```\n\n6. **Documentation accuracy:**\n   - README examples use `noxaudit` command\n   - All GitHub URLs point to atriumn/noxaudit\n   - Config examples reference noxaudit.yml\n\n## Backpressure\n\n- [ ] All Python imports updated (no `from nightwatch.` anywhere)\n- [ ] CLI entry point is `noxaudit` (test: `noxaudit --help`)\n- [ ] All tests pass: `pytest tests/ -v`\n- [ ] Lint passes: `ruff check noxaudit/ tests/`\n- [ ] Format passes: `ruff format --check noxaudit/ tests/`\n- [ ] README accurately describes new name/commands\n- [ ] CONTRIBUTING.md exists and is helpful\n- [ ] CHANGELOG.md documents the rename\n- [ ] No hardcoded \"nightwatch\" strings remain (except in CHANGELOG/comments)\n- [ ] Package installs: `pip install -e .` works\n- [ ] Config example is renamed and updated\n\n## When Done\n\n1. Rebase on origin/main: `git fetch origin && git rebase origin/main`\n2. Run full test suite: `pytest tests/ -v && ruff check noxaudit/ tests/`\n3. Commit message: `refactor: rename nightwatch → noxaudit for OSS release`\n4. Push branch: `git push origin HEAD`\n5. Create PR:\n   ```bash\n   gh pr create \\\n     --title \"refactor: Rename nightwatch → noxaudit for open source release\" \\\n     --body \"## Summary\n   \n   Rename project from Nightwatch to Noxaudit to avoid namespace collision with 1M+ GitHub repos named 'nightwatch'.\n   \n   ## Changes\n   \n   - Renamed Python package: \\`nightwatch/\\` → \\`noxaudit/\\`\n   - Updated package name: \\`nightwatch-ai\\` → \\`noxaudit\\`\n   - Updated CLI command: \\`nightwatch\\` → \\`noxaudit\\`\n   - Updated all GitHub URLs: atriumn/nightwatch → atriumn/noxaudit\n   - Updated config filename: nightwatch.yml → noxaudit.yml\n   - Updated directory: .nightwatch/ → .noxaudit/\n   - Made issues footer repository URL configurable\n   - Added CONTRIBUTING.md\n   - Added CHANGELOG.md documenting rename\n   - Updated README with new branding\n   \n   ## Breaking Changes\n   \n   - CLI command changed (users must update scripts/workflows)\n   - Config file renamed (users must rename nightwatch.yml → noxaudit.yml)\n   - Python imports changed (any custom integrations need updating)\n   \n   ## Post-Merge\n   \n   Jeff needs to:\n   1. Rename GitHub repo: nightwatch → noxaudit\n   2. Update any existing cron jobs/workflows\n   3. Consider publishing to PyPI as \\`noxaudit\\` package\"\n   ```\n6. Output: **LOOP_COMPLETE**\n\n## Notes\n\n- This is a pure refactor - no functional changes to the audit logic\n- Keep the rename atomic - all references updated in one PR\n- The old name \"nightwatch\" can remain in comments explaining the rename\n- After merge, the GitHub repo itself should be renamed (Jeff's task, not Ralph's)\n\n## Model\n\nUse **sonnet** (this is straightforward find-replace + documentation, doesn't need opus)."}}
{"ts":"2026-02-16T05:21:39.459559436Z","type":{"kind":"loop_completed","reason":"completion_promise"}}
